# This is a basic workflow to help you get started with Actions

#
## Controls when the workflow will run
#on:
#  # Triggers the workflow on push or pull request events but only for the "main" branch
#  push:
#    branches:
#      - 'main'
#    paths:
#      - '**.md'
#      - '!**/README.md'
#      - '!**/LICENSE.md'
#      - '!**/_index*'
#
#jobs:
#  test:
#    runs-on: ubuntu-latest
#    steps:
#      - uses: actions/checkout@v2.1.0
#      - uses: jitterbit/get-changed-files@v1
#        id: abc
#        with:
#          format: space-delimited
#          token: ${{ secrets.GITHUB_TOKEN }}
#      - name: Printing
#        run: |
#          echo "All:"
#          echo "${{ steps.abc.outputs.all }}"
#          echo "Added:"
#          echo "${{ steps.abc.outputs.added }}"
#          echo "Removed:"
#          echo "${{ steps.abc.outputs.removed }}"
#          echo "Renamed:"
#          echo "${{ steps.abc.outputs.renamed }}"
#          echo "Modified:"
#          echo "${{ steps.abc.outputs.modified }}"
#          echo "Added+Modified:"
#          echo "${{ steps.abc.outputs.added_modified }}"
#

name: get-changed-files

on:
  push:
    branches:
      - main

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: jitterbit/get-changed-files@v1
        id: abc
        with:
          format: space-delimited
          token: ${{ secrets.GITHUB_TOKEN }}
      - name: Setup Python
        uses: actions/setup-python@v2.2.2
        with:
          python-version: 3.8
      - name: Printing
        run: |
          echo "All:"
          echo "${{ steps.abc.outputs.all }}"
          echo "Added:"
          echo "${{ steps.abc.outputs.added }}"
          echo "Removed:"
          echo "${{ steps.abc.outputs.removed }}"
          echo "Renamed:"
          echo "${{ steps.abc.outputs.renamed }}"
          echo "Modified:"
          echo "${{ steps.abc.outputs.modified }}"
          echo "Added+Modified:"
          echo "${{ steps.abc.outputs.added_modified }}"

      - name: Execute Test Script
        run: |
          echo "Store: ${{ steps.abc.outputs.added_modified }}"
          INPUT_STORE=${{ steps.abc.outputs.added_modified }} python3 ~home/search-bitcoin/code/test2.py